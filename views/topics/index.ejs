<% include ../partials/header %>

<div>
  <h1 class="display-3">CodeSurf Topics</h1>
  <p class="lead">Explore our collection of software related resources!</p>
  <hr class="my-4">
</div>

<div class="row">
	<div class="col-md-4">
		<div class="card mb-3">
		  <div class="card-header">
		    Recent Resources
		  </div>
		  <ul class="list-group list-group-flush">
		  	<% latestResources.forEach(function(resource) { %>
		  		<li class="list-group-item">
		  			<a class="cs-recent-resource" href="/topics/<%= resource.topic.id %>/resources/<%= resource._id %>">
		  				<em><%= resource.topic.topicTitle %> - <%= resource.title %></em>
		  			</a>
		  		</li>
		  	<% }); %>
		  </ul>
		</div>
	</div>
	<div class="col-md-8">
		<form class="mb-3" action="/topics" method="GET">
			<div class="form-row">
				<div class="form-group col-md-9">
					<input class="form-control" type="search" name="search" aria-label="Search" placeholder="Search Topics...">
				</div>
				<div class="form-group col-md-3">
					<button class="btn btn-primary btn-md btn-block">Search</button>
				</div>
			</div>
		</form>
	</div>
</div>
<div class="row">
	<% topics.forEach(function(topic) { %>
		<div class="col-sm-6">
			<div class="card bg-light mb-3">
			  <div class="card-header">
			  	<p class="float-left">
			  		<em>Created by <%= topic.author.username %></em>
			  	</p>
			  	<p class="float-right">
			  		<em><%= moment(topic.createdAt).fromNow() %></em>
			  	</p>
			  </div>
			  <div class="card-body">
			    <h4 class="card-title"><%= topic.title %></h4>
			    <p class="card-text"><%= topic.description %></p>
			    <a class="btn btn-secondary" href="/topics/<%= topic._id %>">Explore</a>
			    <p class="float-right">Resources: <%= topic.resources.length %></p>
			  </div>
			</div>
		</div>
	<% }); %>
</div>

<% include ../partials/footer %>